<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>E-Waste Management - Final Challenge</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@2.12.0/tsparticles.confetti.min.js"></script>
<style type="text/css">
  html,body{
    margin:0;padding:0;min-height:100vh;
    color:#1e293b;font-family:'Segoe UI', system-ui, sans-serif;
    overflow-x:hidden;line-height:1.8;font-size:18px;
    background:#0f172a;
  }
 
  .neon-title{
    font-size:clamp(3rem,7vw,48px);font-weight:900;
    background:linear-gradient(90deg,#2563eb,#3b82f6,#60a5fa,#2563eb);background-size:300%;
    -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
    animation:glow 8s ease-in-out infinite;text-shadow:0 0 30px rgba(37,99,235,0.4);
  }
  @keyframes glow{0%,100%{background-position:0%}50%{background-position:300%}}
 
  .content-card{
    position:relative;background:white;border:4px solid #2563eb;border-radius:2rem;
    padding:2rem;margin:40px auto;transition:all .4s;
    box-shadow:0 15px 50px rgba(37,99,235,0.15);max-width:7xl;
  }
  .content-card:hover{
    transform:translateY(-12px);box-shadow:0 30px 80px rgba(37,99,235,0.25);
  }
 
  .subtitle{
    font-size:clamp(1.8rem,5vw,3rem);font-weight:bold;color:#60a5fa;
    text-shadow:0 0 20px rgba(96,165,250,0.4);margin-top:1.5rem;
  }
 
  /* DRAGGABLE ITEMS */
  .draggable-item{
    padding:1.2rem;background:#f0f9ff;border:3px dashed #3b82f6;
    border-radius:1.5rem;margin:1rem 0;cursor:grab;font-weight:bold;text-align:center;
    transition:all .3s;user-select:none;font-size:1.3rem;box-shadow:0 8px 20px rgba(0,0,0,0.08);
  }
  .draggable-item:active{cursor:grabbing;opacity:0.8;transform:scale(1.05);}
  .draggable-item:hover{transform:translateY(-8px);box-shadow:0 15px 30px rgba(59,130,246,0.2);}
 
  /* DROPPED ITEM INSIDE BIN */
  .dropped-item{
    background:#ffffffcc;border:2px solid #64748b;border-radius:1rem;
    padding:0.8rem 1.2rem;margin:0.5rem;font-size:1.1rem;
  }
  .dropped-item.wrong-placement{
    border-color:#ef4444;background:#fee2e2;color:#991b1b;
    animation:shake 0.5s ease-in-out;
  }
  @keyframes shake {
    0%,100%{transform:translateX(0)}
    25%{transform:translateX(-8px)}
    75%{transform:translateX(8px)}
  }
 
  /* DUSTBINS */
  .dustbin{
    position:relative;min-height:380px;background:#f8fbff;border:4px dashed #94a3b8;
    border-radius:2rem;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;
    padding-top:4rem;transition:background 0.5s, border-color 0.5s, box-shadow 0.5s;
    box-shadow:0 15px 40px rgba(0,0,0,0.1);overflow:hidden;
  }
  .dustbin.over{border-color:#2563eb;background:#e0f2fe;box-shadow:0 0 50px rgba(37,99,235,0.6);}
  .dustbin.correct{background:#22c55e;border-color:#22c55e;box-shadow:0 0 50px rgba(34,197,94,0.6);}
  .dustbin.wrong{background:#ef4444;border-color:#ef4444;box-shadow:0 0 50px rgba(239,68,68,0.6);}
 
  .bin-body{
    width:180px;height:220px;background:#e2e8f0;border-radius:0 0 1rem 1rem;
    box-shadow:inset 0 -10px 20px rgba(0,0,0,0.1);
  }
  .bin-lid{
    position:absolute;top:20px;width:200px;height:60px;background:#cbd5e1;
    border-radius:1rem 1rem 0.5rem 0.5rem;transition:none;
    transform-origin:center bottom;
    box-shadow:0 10px 20px rgba(0,0,0,0.2);
  }
  .bin-handle{
    position:absolute;top:10px;left:50%;transform:translateX(-50%);
    width:60px;height:20px;background:#94a3b8;border-radius:1rem;
  }
 
  .hazardous .bin-body{background:#fee2e2;}
  .hazardous .bin-lid{background:#fecaca;}
  .hazardous .bin-handle{background:#ef4444;}
 
  .dustbin-label{font-size:1.8rem;font-weight:900;color:#1e293b;margin-top:2rem;}
  .dustbin-sublabel{font-size:1.2rem;color:#64748b;margin-top:0.5rem;}
 
  /* FEEDBACK */
  .feedback-list{
    margin-top:1rem;padding:1rem;background:#fee2e2;border-radius:1rem;
    border:2px solid #ef4444;max-width:600px;
  }
 
  /* BUTTONS */
  .activity-btn{
    padding:1rem 2.5rem;font-size:1.5rem;border-radius:2rem;
    transition:all 0.3s;box-shadow:0 10px 30px rgba(0,0,0,0.15);
    font-weight:bold;
  }
  .activity-btn:hover{transform:scale(1.1);}
  .activity-btn-primary{background:#2563eb;color:white;}
  .activity-btn-secondary{background:#e2e8f0;color:#1e293b;}
 
  /* MODAL */
  #victoryModal{
    display:none;position:fixed;inset:0;background:rgba(0,0,0,0.9);z-index:9999;
    align-items:center;justify-content:center;flex-direction:column;opacity:0;
  }
  .modal-content{
    background:linear-gradient(135deg,#1e293b,#0f172a);border:6px solid #2563eb;
    border-radius:3rem;padding:4rem;max-width:90%;text-align:center;
    box-shadow:0 0 100px rgba(37,99,235,0.8);transform:scale(0.8);
  }
  .modal-title{
    font-size:clamp(3rem,8vw,5rem);font-weight:900;
    background:linear-gradient(90deg,#60a5fa,#3b82f6,#2563eb,#60a5fa);
    background-size:300%;-webkit-background-clip:text;background-clip:text;
    -webkit-text-fill-color:transparent;animation:glow 6s ease-in-out infinite;
  }
  .modal-message{
    font-size:1.8rem;color:#e2e8f0;margin:2rem 0;line-height:1.6;
  }
</style>
</head>
<body class="bg-slate-900">

<!-- Background GIF -->
<div class="fixed inset-0 -z-20 pointer-events-none opacity-30">
  <img alt="background" class="w-full h-full object-cover" src="/s/articles/6927da4e2869b1081116dd9e/images/1two.gif" />
</div>

<!-- Main Activity Section -->
<section class="py-24 px-6">
  <div class="content-card mx-auto max-w-7xl text-center relative overflow-hidden">
    
    <h1 class="neon-title">Final Challenge: E-Waste Segregation Showdown</h1>
    <p class="subtitle">Only the true E-Waste Guardian can restore balance.</p>
    
    <p class="mt-12 text-xl text-[#64748b] max-w-4xl mx-auto">
      Drag each e-waste item into the correct disposal bin.<br>
      Recyclable items belong in the green-blue bin. Hazardous items require special handling.
    </p>
    
    <!-- Draggable Items -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mt-16 max-w-5xl mx-auto">
      <div class="draggable-item" data-type="recyclable" draggable="true">Old Mobile Phone</div>
      <div class="draggable-item" data-type="recyclable" draggable="true">Broken Laptop</div>
      <div class="draggable-item" data-type="hazardous" draggable="true">Used Batteries</div>
      <div class="draggable-item" data-type="hazardous" draggable="true">Fluorescent Lamp</div>
      <div class="draggable-item" data-type="recyclable" draggable="true">Circuit Boards</div>
      <div class="draggable-item" data-type="recyclable" draggable="true">Charger & Cables</div>
      <div class="draggable-item" data-type="recyclable" draggable="true">CRT Monitor</div>
      <div class="draggable-item" data-type="hazardous" draggable="true">Printer Cartridges</div>
    </div>
    
    <!-- Dustbins -->
    <div class="grid md:grid-cols-2 gap-12 mt-20 max-w-6xl mx-auto">
      <div id="recyclableBin" class="dustbin">
        <div class="bin-lid"><div class="bin-handle"></div></div>
        <div class="bin-body"></div>
        <div class="dustbin-label text-[#2563eb]">Recyclable E-Waste</div>
        <div class="dustbin-sublabel">Recover ‚Ä¢ Reuse ‚Ä¢ Recycle</div>
      </div>
      
      <div id="hazardousBin" class="dustbin hazardous">
        <div class="bin-lid"><div class="bin-handle"></div></div>
        <div class="bin-body"></div>
        <div class="dustbin-label text-[#ef4444]">Hazardous E-Waste</div>
        <div class="dustbin-sublabel">Handle With Care ‚Ä¢ Special Disposal</div>
      </div>
    </div>
    
    <!-- Buttons -->
    <div class="mt-20 flex justify-center gap-8">
      <button id="checkBtn" class="activity-btn activity-btn-primary text-2xl px-12 py-5">CHECK SEGREGATION</button>
      <button id="resetBtn" class="activity-btn activity-btn-secondary text-2xl px-12 py-5">RESET</button>
    </div>
    
    <div id="feedbackArea" class="mt-12 max-w-4xl mx-auto"></div>
  </div>
</section>

<!-- Victory Modal -->
<div id="victoryModal">
  <div class="modal-content">
    <h1 class="modal-title">YOU HAVE DEFEATED THE E-WASTE CHAOS</h1>
    <p class="modal-message">
      ‚ö° You are now the <span class="text-[#60a5fa] font-bold">FINAL BOSS OF E-WASTE MANAGEMENT</span> ‚ö°<br><br>
      Through knowledge, precision, and unwavering responsibility,<br>
      you have restored balance to the digital world.<br><br>
      üåç The planet thanks you.<br>
      The future is safeguarded by guardians like you.
    </p>
    <div class="mt-12 space-x-8">
      <button onclick="replayLevel()" class="activity-btn activity-btn-primary text-xl px-10 py-4">REPLAY BOSS LEVEL</button>
      <button onclick="proceedNext()" class="activity-btn activity-btn-secondary text-xl px-10 py-4">PROCEED TO NEXT CHAPTER</button>
    </div>
  </div>
</div>

<!-- Victory Audio -->
<audio id="victoryAudio" preload="auto">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-epic-orchestral-choir-transition-229.mp3" type="audio/mpeg">
</audio>

<script>
// Drag & Drop Logic + Lid Animation
let draggedItem = null;
const recyclables = ["Old Mobile Phone", "Broken Laptop", "Circuit Boards", "Charger & Cables", "CRT Monitor"];
const hazardous = ["Used Batteries", "Fluorescent Lamp", "Printer Cartridges"];

document.querySelectorAll('.draggable-item').forEach(item => {
  item.addEventListener('dragstart', e => {
    draggedItem = item;
    setTimeout(() => item.style.opacity = '0.4', 0);
  });
  item.addEventListener('dragend', () => {
    item.style.opacity = '1';
    draggedItem = null;
  });
});

['recyclableBin', 'hazardousBin'].forEach(binId => {
  const bin = document.getElementById(binId);
  const lid = bin.querySelector('.bin-lid');
  
  bin.addEventListener('dragover', e => {
    e.preventDefault();
    bin.classList.add('over');
    gsap.to(lid, { rotationX: -110, duration: 0.7, ease: "back.out(1.4)" });
  });
  
  bin.addEventListener('dragleave', () => {
    bin.classList.remove('over');
    gsap.to(lid, { rotationX: 0, duration: 0.5, ease: "power2.out" });
  });
  
  bin.addEventListener('drop', e => {
    e.preventDefault();
    bin.classList.remove('over');
    
    if (draggedItem) {
      const clone = draggedItem.cloneNode(true);
      clone.draggable = false;
      clone.style.cursor = "default";
      clone.classList.remove('draggable-item');
      clone.classList.add('dropped-item');
      bin.appendChild(clone);
      draggedItem.style.display = 'none';
      draggedItem = null;
    }
    
    gsap.killTweensOf(lid);
    gsap.to(lid, { rotationX: 0, duration: 0.6, ease: "bounce.out" });
  });
});

// Check Segregation
document.getElementById('checkBtn').addEventListener('click', () => {
  let correct = 0;
  const total = 8;
  const misplaced = [];
  
  const recBin = document.getElementById('recyclableBin');
  const hazBin = document.getElementById('hazardousBin');
  const feedbackArea = document.getElementById('feedbackArea');
  
  recBin.classList.remove('correct', 'wrong');
  hazBin.classList.remove('correct', 'wrong');
  feedbackArea.innerHTML = '';
  document.querySelectorAll('.dropped-item').forEach(item => item.classList.remove('wrong-placement'));
  
  recBin.querySelectorAll('.dropped-item').forEach(child => {
    const text = child.textContent.trim();
    if (recyclables.includes(text)) {
      correct++;
    } else {
      child.classList.add('wrong-placement');
      misplaced.push(`<strong>${text}</strong> should go to <strong>Hazardous E-Waste</strong>`);
    }
  });
  
  hazBin.querySelectorAll('.dropped-item').forEach(child => {
    const text = child.textContent.trim();
    if (hazardous.includes(text)) {
      correct++;
    } else {
      child.classList.add('wrong-placement');
      misplaced.push(`<strong>${text}</strong> should go to <strong>Recyclable E-Waste</strong>`);
    }
  });
  
  if (correct === total) {
    recBin.classList.add('correct');
    hazBin.classList.add('correct');
    triggerVictory();
  } else {
    if (recBin.querySelector('.wrong-placement')) recBin.classList.add('wrong');
    if (hazBin.querySelector('.wrong-placement')) hazBin.classList.add('wrong');
    
    let feedbackHTML = `<p class="text-4xl font-bold text-orange-500 mb-6">${correct}/${total} Correct</p>`;
    if (misplaced.length > 0) {
      feedbackHTML += `<div class="feedback-list text-lg"><p class="font-bold mb-3">Misplaced items:</p><ul class="list-disc list-inside space-y-2 text-left">`;
      misplaced.forEach(item => {
        feedbackHTML += `<li>${item}</li>`;
      });
      feedbackHTML += `</ul></div>`;
    }
    feedbackArea.innerHTML = feedbackHTML;
  }
});

// Reset Button
document.getElementById('resetBtn').addEventListener('click', () => {
  // Show all draggable items again
  document.querySelectorAll('.draggable-item').forEach(item => {
    item.style.display = 'block';
    item.style.opacity = '1';
  });
  
  // Clear both bins
  document.getElementById('recyclableBin').innerHTML = `
    <div class="bin-lid"><div class="bin-handle"></div></div>
    <div class="bin-body"></div>
    <div class="dustbin-label text-[#2563eb]">Recyclable E-Waste</div>
    <div class="dustbin-sublabel">Recover ‚Ä¢ Reuse ‚Ä¢ Recycle</div>
  `;
  document.getElementById('hazardousBin').innerHTML = `
    <div class="bin-lid"><div class="bin-handle"></div></div>
    <div class="bin-body"></div>
    <div class="dustbin-label text-[#ef4444]">Hazardous E-Waste</div>
    <div class="dustbin-sublabel">Handle With Care ‚Ä¢ Special Disposal</div>
  `;
  
  // Clear feedback and bin states
  document.getElementById('feedbackArea').innerHTML = '';
  document.getElementById('recyclableBin').classList.remove('correct', 'wrong', 'over');
  document.getElementById('hazardousBin').classList.remove('correct', 'wrong', 'over');
});

function triggerVictory() {
  const modal = document.getElementById('victoryModal');
  modal.style.display = 'flex';
  
  gsap.to(modal, {opacity: 1, duration: 1});
  gsap.fromTo('.modal-content', 
    {scale: 0.5, rotate: -10},
    {scale: 1, rotate: 0, duration: 1.2, ease: "elastic.out(1,0.5)"}
  );
  
  document.getElementById('victoryAudio').play().catch(() => {});
  
  tsParticles.confetti('tsparticles', {
    particles: {
      number: {value: 200},
      color: {value: ['#2563eb', '#3b82f6', '#60a5fa', '#22c55e']},
      shape: {type: 'circle'},
      opacity: {value: 1},
      size: {value: {min: 4, max: 12}},
      move: {enable: true, speed: 6, direction: 'none', outModes: 'out'}
    },
    duration: 3,
    fullScreen: {enable: true, zIndex: -1}
  });
}

function replayLevel() {
  location.reload();
}

function proceedNext() {
  alert("Proceeding to the next chapter... (Placeholder)");
}
</script>

</body>
</html>