<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>E-Waste Management - Final Challenge</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@tsparticles/confetti@2.12.0/tsparticles.confetti.min.js"></script>
<style type="text/css">
  html,body{
    margin:0;padding:0;min-height:100vh;
    color:#1e293b;font-family:'Segoe UI', system-ui, sans-serif;
    overflow-x:hidden;line-height:1.8;font-size:16px;
    background:#0f172a;
  }
 
  /* Main title - 24px */
  h1.neon-title{
    font-size:24px !important;font-weight:900;
    background:linear-gradient(90deg,#2563eb,#3b82f6,#60a5fa,#2563eb);background-size:300%;
    -webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;
    animation:glow 8s ease-in-out infinite;text-shadow:0 0 20px rgba(37,99,235,0.4);
  }
  @keyframes glow{0%,100%{background-position:0%}50%{background-position:300%}}
 
  h2, h3, .subtitle, .dustbin-label{
    font-size:24px !important;
    font-weight:bold;
  }
 
  p, li, .instruction-text, .modal-message, .start-purpose, .start-purpose strong, .feedback-list{
    font-size:16px;
    line-height:1.7;
  }
 
  .content-card{
    position:relative;background:white;border:4px solid #2563eb;border-radius:2rem;
    padding:2rem;margin:40px auto;transition:all .4s;
    box-shadow:0 15px 50px rgba(37,99,235,0.15);max-width:7xl;
  }
  .content-card:hover{
    transform:translateY(-12px);box-shadow:0 30px 80px rgba(37,99,235,0.25);
  }
 
  .subtitle{
    color:#60a5fa;text-shadow:0 0 20px rgba(96,165,250,0.4);margin-top:1rem;
  }
 
  /* DRAGGABLE ITEMS - Now with PNG images + label below */
  .draggable-item{
    background:#f0f9ff;border:3px dashed #3b82f6;
    border-radius:1.5rem;margin:1rem 0;cursor:grab;font-weight:bold;text-align:center;
    transition:all .3s;user-select:none;box-shadow:0 8px 20px rgba(0,0,0,0.08);
    display:flex;flex-direction:column;align-items:center;justify-content:center;
    padding:1.5rem 1rem;
  }
  .draggable-item img{
    width:120px;height:120px;object-fit:contain;margin-bottom:0.5rem;
  }
  .draggable-item .label{
    font-size:16px;color:#1e293b;
  }
  .draggable-item:active{cursor:grabbing;opacity:0.8;transform:scale(1.05);}
  .draggable-item:hover{transform:translateY(-8px);box-shadow:0 15px 30px rgba(59,130,246,0.2);}
 
  /* DROPPED ITEM - Show image + label */
  .dropped-item{
    background:#ffffffcc;border:2px solid #64748b;border-radius:1rem;
    padding:0.7rem 1rem;margin:0.5rem;font-size:16px;display:flex;flex-direction:column;align-items:center;
  }
  .dropped-item img{
    width:100px;height:100px;object-fit:contain;margin-bottom:0.5rem;
  }
  .dropped-item .label{
    font-size:14px;color:#1e293b;
  }
  .dropped-item.wrong-placement{
    border-color:#ef4444;background:#fee2e2;color:#991b1b;
    animation:shake 0.5s ease-in-out;
  }
  @keyframes shake {
    0%,100%{transform:translateX(0)}
    25%{transform:translateX(-8px)}
    75%{transform:translateX(8px)}
  }
 
  /* DUSTBINS */
  .dustbin{
    position:relative;min-height:380px;background:#f8fbff;border:4px dashed #94a3b8;
    border-radius:2rem;display:flex;flex-direction:column;align-items:center;justify-content:flex-start;
    padding-top:4rem;transition:background 0.5s, border-color 0.5s, box-shadow 0.5s;
    box-shadow:0 15px 40px rgba(0,0,0,0.1);overflow:hidden;
  }
  .dustbin.over{border-color:#2563eb;background:#e0f2fe;box-shadow:0 0 50px rgba(37,99,235,0.6);}
  .dustbin.correct{background:#22c55e;border-color:#22c55e;box-shadow:0 0 50px rgba(34,197,94,0.6);}
  .dustbin.wrong{background:#ef4444;border-color:#ef4444;box-shadow:0 0 50px rgba(239,68,68,0.6);}
 
  .bin-body{
    width:180px;height:220px;background:#e2e8f0;border-radius:0 0 1rem 1rem;
    box-shadow:inset 0 -10px 20px rgba(0,0,0,0.1);
  }
  .bin-lid{
    position:absolute;top:20px;width:200px;height:60px;background:#cbd5e1;
    border-radius:1rem 1rem 0.5rem 0.5rem;transition:none;
    transform-origin:center bottom;
    box-shadow:0 10px 20px rgba(0,0,0,0.2);
  }
  .bin-handle{
    position:absolute;top:10px;left:50%;transform:translateX(-50%);
    width:60px;height:20px;background:#94a3b8;border-radius:1rem;
  }
 
  .hazardous .bin-body{background:#fee2e2;}
  .hazardous .bin-lid{background:#fecaca;}
  .hazardous .bin-handle{background:#ef4444;}
 
  .dustbin-sublabel{font-size:16px;color:#64748b;margin-top:0.5rem;}
 
  /* BUTTONS */
  .activity-btn{
    padding:1rem 2.5rem;font-size:24px;border-radius:2rem;
    transition:all 0.3s;box-shadow:0 10px 30px rgba(0,0,0,0.15);
    font-weight:bold;position:relative;z-index:20;
  }
  .activity-btn:hover{transform:scale(1.1);}
  .activity-btn-primary{background:#2563eb;color:white;}
  .activity-btn-secondary{background:#e2e8f0;color:#1e293b;}
 
  /* START SCREEN */
  #startScreen{
    position:fixed;inset:0;background:rgba(0,0,0,0.95);z-index:9998;
    display:flex;align-items:center;justify-content:center;flex-direction:column;
    text-align:center;padding:2rem;
  }
  .start-title{
    font-size:24px !important;font-weight:900;
    background:linear-gradient(90deg,#2563eb,#3b82f6,#60a5fa,#2563eb);
    background-size:300%;-webkit-background-clip:text;background-clip:text;
    -webkit-text-fill-color:transparent;animation:glow 8s ease-in-out infinite;
    margin-bottom:1.5rem;
  }
 
  /* VICTORY MODAL */
  #victoryModal{
    display:none;position:fixed;inset:0;background:rgba(0,0,0,0.9);z-index:9999;
    align-items:center;justify-content:center;flex-direction:column;opacity:0;padding:1rem;
  }
  .modal-content{
    position:relative;background:linear-gradient(135deg,#1e293b,#0f172a);border:6px solid #2563eb;
    border-radius:3rem;padding:3rem;max-width:95%;text-align:center;overflow:hidden;
    box-shadow:0 0 100px rgba(37,99,235,0.8);transform:scale(0.8);
  }
  .modal-title{
    font-size:clamp(2.2rem,6vw,3.5rem);font-weight:900;
    background:linear-gradient(90deg,#60a5fa,#3b82f6,#2563eb,#60a5fa);
    background-size:300%;-webkit-background-clip:text;background-clip:text;
    -webkit-text-fill-color:transparent;animation:glow 6s ease-in-out infinite;
    margin-bottom:1.5rem;position:relative;z-index:20;
  }
 
  /* FULLSCREEN BUTTON */
  #fullscreenBtn{
    position:fixed;top:20px;right:20px;z-index:9999;
    background:#2563eb/90;color:white;padding:1rem;border-radius:50%;
    width:60px;height:60px;display:flex;align-items:center;justify-content:center;
    font-size:2rem;box-shadow:0 0 20px rgba(37,99,235,0.6);
    cursor:pointer;transition:all 0.3s;
  }
  #fullscreenBtn:hover{transform:scale(1.15);background:#2563eb;}
</style>
</head>
<body class="bg-slate-900">

<!-- Background GIF -->
<div class="fixed inset-0 -z-20 pointer-events-none opacity-30">
  <img alt="background" class="w-full h-full object-cover" src="/s/articles/6927da4e2869b1081116dd9e/images/1two.gif" />
</div>

<!-- Fullscreen Button -->
<button id="fullscreenBtn" onclick="toggleFullScreen()" title="Toggle Fullscreen">‚õ∂</button>

<!-- Start Screen -->
<div id="startScreen">
  <h1 class="start-title">Final Challenge: E-Waste Segregation Showdown</h1>
  <p class="start-purpose text-white max-w-4xl mx-auto">
    Welcome to the final boss level of the E-Waste Management chapter!<br><br>
    In this challenge, you will demonstrate your understanding of responsible e-waste disposal by correctly segregating common electronic items.<br><br>
    ‚Ä¢ Items that can be recovered and recycled go into the <strong>Recyclable E-Waste</strong> bin.<br>
    ‚Ä¢ Items containing hazardous materials go into the <strong>Hazardous E-Waste</strong> bin.<br><br>
    Only perfect segregation will defeat the chaos and prove you are a true E-Waste Guardian.<br><br>
    Click the button below to begin the challenge.
  </p>
  <button onclick="startActivity()" class="activity-btn activity-btn-primary mt-12">START ACTIVITY</button>
</div>

<!-- Main Activity -->
<section id="activitySection" class="py-24 px-6 hidden">
  <div class="content-card mx-auto max-w-7xl text-center">
    
    <h1 class="neon-title">Final Challenge: E-Waste Segregation Showdown</h1>
    <h2 class="subtitle">Only the true E-Waste Guardian can restore balance.</h2>
    
    <p class="mt-12 instruction-text text-[#64748b] max-w-4xl mx-auto">
      Drag each e-waste item into the correct disposal bin.
    </p>
    
    <!-- Draggable Items with PNG Images -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mt-16 max-w-5xl mx-auto">
      <div class="draggable-item" data-type="recyclable" draggable="true">
        <img src="./images/‚ÄîPngtree‚Äîelegant realistic old mobile phone_15420502.png" alt="Old Mobile Phone">
        <div class="label">Old Mobile Phone</div>
      </div>
      <div class="draggable-item" data-type="recyclable" draggable="true">
        <img src="./images/‚ÄîPngtree‚Äîbroken laptop screen advertising_2416673.png" alt="Broken Laptop">
        <div class="label">Broken Laptop</div>
      </div>
      <div class="draggable-item" data-type="hazardous" draggable="true">
        <img src="./images/pngtree-pile-of-used-lithium-ion-batteries-png-image_18110689 (1).png" alt="Used Batteries">
        <div class="label">Used Batteries</div>
      </div>
      <div class="draggable-item" data-type="hazardous" draggable="true">
        <img src="./images/‚ÄîPngtree‚Äîlighting tool long tube energy_4451364.png" alt="Fluorescent Lamp">
        <div class="label">Fluorescent Lamp</div>
      </div>
      <div class="draggable-item" data-type="recyclable" draggable="true">
        <img src="./images/‚ÄîPngtree‚Äîthe integrated circuit board_3387702.png" alt="Circuit Boards">
        <div class="label">Circuit Boards</div>
      </div>
      <div class="draggable-item" data-type="recyclable" draggable="true">
        <img src="./images/‚ÄîPngtree‚Äîa 3d charger with cable_21217427.png" alt="Charger & Cables">
        <div class="label">Charger & Cables</div>
      </div>
      <div class="draggable-item" data-type="recyclable" draggable="true">
        <img src="./images/‚ÄîPngtree‚Äîcrt computer_16409634.png" alt="CRT Monitor">
        <div class="label">CRT Monitor</div>
      </div>
      <div class="draggable-item" data-type="hazardous" draggable="true">
        <img src="./images/‚ÄîPngtree‚Äîprinter cartridge icon simple style_5150938.png" alt="Printer Cartridges">
        <div class="label">Printer Cartridges</div>
      </div>
    </div>
    
    <!-- Dustbins -->
    <div class="grid md:grid-cols-2 gap-12 mt-20 max-w-6xl mx-auto">
      <div id="recyclableBin" class="dustbin">
        <div class="bin-lid"><div class="bin-handle"></div></div>
        <div class="bin-body"></div>
        <h3 class="dustbin-label text-[#2563eb]">Recyclable E-Waste</h3>
        <p class="dustbin-sublabel">Recover ‚Ä¢ Reuse ‚Ä¢ Recycle</p>
      </div>
      
      <div id="hazardousBin" class="dustbin hazardous">
        <div class="bin-lid"><div class="bin-handle"></div></div>
        <div class="bin-body"></div>
        <h3 class="dustbin-label text-[#ef4444]">Hazardous E-Waste</h3>
        <p class="dustbin-sublabel">Handle With Care ‚Ä¢ Special Disposal</p>
      </div>
    </div>
    
    <!-- Buttons -->
    <div class="mt-20 flex justify-center gap-12">
      <button id="checkBtn" class="activity-btn activity-btn-primary">CHECK SEGREGATION</button>
      <button id="resetBtn" class="activity-btn activity-btn-secondary">RESET</button>
    </div>
    
    <div id="feedbackArea" class="mt-12 max-w-4xl mx-auto"></div>
  </div>
</section>

<!-- Victory Modal with GIF + Sound -->
<div id="victoryModal">
  <div class="modal-content">
    <!-- Victory GIF Background -->
    <img id="victoryGif" 
         src="./images/Happy Robot GIF.gif" 
         alt="Victory Celebration" 
         class="absolute inset-0 w-full h-full object-cover opacity-80 pointer-events-none">
    
    <!-- Victory Audio -->
    <audio id="victoryAudio" preload="auto">
      <source src="https://pa2-cmd.github.io/audio_chapters_Ewaste/victory-96688.mp3" type="audio/mpeg">
    </audio>
    
    <h1 class="modal-title">YOU HAVE DEFEATED THE E-WASTE CHAOS</h1>
    <p class="modal-message">
      ‚ö° You are now the <span class="text-[#60a5fa] font-bold">FINAL BOSS OF E-WASTE MANAGEMENT</span> ‚ö°<br><br>
      Through knowledge, precision, and unwavering responsibility,<br>
      you have restored balance to the digital world.<br><br>
      üåç The planet thanks you.<br>
      The future is safeguarded by guardians like you.
    </p>
    <div class="mt-12 space-x-8">
      <button onclick="replayLevel()" class="activity-btn activity-btn-primary">REPLAY BOSS LEVEL</button>
      <button onclick="proceedNext()" class="activity-btn activity-btn-secondary">PROCEED TO NEXT CHAPTER</button>
    </div>
  </div>
</div>

<script>
function toggleFullScreen() {
  if (!document.fullscreenElement) {
    document.documentElement.requestFullscreen();
  } else {
    document.exitFullscreen();
  }
}

function startActivity() {
  document.getElementById('startScreen').style.display = 'none';
  document.getElementById('activitySection').classList.remove('hidden');
}

// Drag & Drop + Lid Animation
let draggedItem = null;
const recyclables = ["Old Mobile Phone", "Broken Laptop", "Circuit Boards", "Charger & Cables", "CRT Monitor"];
const hazardous = ["Used Batteries", "Fluorescent Lamp", "Printer Cartridges"];

document.querySelectorAll('.draggable-item').forEach(item => {
  item.addEventListener('dragstart', e => {
    draggedItem = item;
    setTimeout(() => item.style.opacity = '0.4', 0);
  });
  item.addEventListener('dragend', () => {
    item.style.opacity = '1';
    draggedItem = null;
  });
});

['recyclableBin', 'hazardousBin'].forEach(binId => {
  const bin = document.getElementById(binId);
  const lid = bin.querySelector('.bin-lid');
  
  bin.addEventListener('dragover', e => {
    e.preventDefault();
    bin.classList.add('over');
    gsap.to(lid, { rotationX: -110, duration: 0.7, ease: "back.out(1.4)" });
  });
  
  bin.addEventListener('dragleave', () => {
    bin.classList.remove('over');
    gsap.to(lid, { rotationX: 0, duration: 0.5, ease: "power2.out" });
  });
  
  bin.addEventListener('drop', e => {
    e.preventDefault();
    bin.classList.remove('over');
    
    if (draggedItem) {
      const clone = draggedItem.cloneNode(true);
      clone.draggable = false;
      clone.style.cursor = "default";
      clone.classList.remove('draggable-item');
      clone.classList.add('dropped-item');
      bin.appendChild(clone);
      draggedItem.style.display = 'none';
      draggedItem = null;
    }
    
    gsap.killTweensOf(lid);
    gsap.to(lid, { rotationX: 0, duration: 0.6, ease: "bounce.out" });
  });
});

// Check & Reset - Updated to use label text for identification
document.getElementById('checkBtn').addEventListener('click', () => {
  let correct = 0;
  const total = 8;
  const misplaced = [];
  
  const recBin = document.getElementById('recyclableBin');
  const hazBin = document.getElementById('hazardousBin');
  const feedbackArea = document.getElementById('feedbackArea');
  
  recBin.classList.remove('correct', 'wrong');
  hazBin.classList.remove('correct', 'wrong');
  feedbackArea.innerHTML = '';
  document.querySelectorAll('.dropped-item').forEach(item => item.classList.remove('wrong-placement'));
  
  recBin.querySelectorAll('.dropped-item').forEach(child => {
    const text = child.querySelector('.label').textContent.trim();
    if (recyclables.includes(text)) correct++;
    else {
      child.classList.add('wrong-placement');
      misplaced.push(`<strong>${text}</strong> should go to <strong>Hazardous E-Waste</strong>`);
    }
  });
  
  hazBin.querySelectorAll('.dropped-item').forEach(child => {
    const text = child.querySelector('.label').textContent.trim();
    if (hazardous.includes(text)) correct++;
    else {
      child.classList.add('wrong-placement');
      misplaced.push(`<strong>${text}</strong> should go to <strong>Recyclable E-Waste</strong>`);
    }
  });
  
  if (correct === total) {
    recBin.classList.add('correct');
    hazBin.classList.add('correct');
    triggerVictory();
  } else {
    if (recBin.querySelector('.wrong-placement')) recBin.classList.add('wrong');
    if (hazBin.querySelector('.wrong-placement')) hazBin.classList.add('wrong');
    
    let feedbackHTML = `<p class="text-3xl font-bold text-orange-500 mb-6">${correct}/${total} Correct</p>`;
    if (misplaced.length > 0) {
      feedbackHTML += `<div class="feedback-list"><p class="font-bold mb-3">Misplaced items:</p><ul class="list-disc list-inside space-y-2 text-left">`;
      misplaced.forEach(item => feedbackHTML += `<li>${item}</li>`);
      feedbackHTML += `</ul></div>`;
    }
    feedbackArea.innerHTML = feedbackHTML;
  }
});

document.getElementById('resetBtn').addEventListener('click', () => {
  document.querySelectorAll('.draggable-item').forEach(item => {
    item.style.display = 'flex';
    item.style.opacity = '1';
  });
  
  document.getElementById('recyclableBin').innerHTML = `
    <div class="bin-lid"><div class="bin-handle"></div></div>
    <div class="bin-body"></div>
    <h3 class="dustbin-label text-[#2563eb]">Recyclable E-Waste</h3>
    <p class="dustbin-sublabel">Recover ‚Ä¢ Reuse ‚Ä¢ Recycle</p>
  `;
  document.getElementById('hazardousBin').innerHTML = `
    <div class="bin-lid"><div class="bin-handle"></div></div>
    <div class="bin-body"></div>
    <h3 class="dustbin-label text-[#ef4444]">Hazardous E-Waste</h3>
    <p class="dustbin-sublabel">Handle With Care ‚Ä¢ Special Disposal</p>
  `;
  
  document.getElementById('feedbackArea').innerHTML = '';
  document.getElementById('recyclableBin').classList.remove('correct', 'wrong', 'over');
  document.getElementById('hazardousBin').classList.remove('correct', 'wrong', 'over');
});

function triggerVictory() {
  const modal = document.getElementById('victoryModal');
  const gif = document.getElementById('victoryGif');
  const audio = document.getElementById('victoryAudio');
  
  modal.style.display = 'flex';
  
  gif.style.opacity = '0.8';
  audio.currentTime = 0;
  audio.play().catch(() => {});
  
  gsap.to(modal, {opacity: 1, duration: 1});
  gsap.fromTo('.modal-content', 
    {scale: 0.5, rotate: -10},
    {scale: 1, rotate: 0, duration: 1.2, ease: "elastic.out(1,0.5)"}
  );
  
  gsap.to(gif, {
    opacity: 0,
    duration: 6,
    ease: "power1.out"
  });
  
  tsParticles.confetti('tsparticles', {
    particles: {
      number: {value: 200},
      color: {value: ['#2563eb', '#3b82f6', '#60a5fa', '#22c55e']},
      shape: {type: 'circle'},
      opacity: {value: 1},
      size: {value: {min: 4, max: 12}},
      move: {enable: true, speed: 6, direction: 'none', outModes: 'out'}
    },
    duration: 3,
    fullScreen: {enable: true, zIndex: -1}
  });
}

function replayLevel() {
  location.reload();
}

function proceedNext() {
  alert("Congratulations! Proceeding to the next chapter...");
}
</script>

</body>
</html>